"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.SwnQueue = void 0;
const aws_cdk_lib_1 = require("aws-cdk-lib");
const aws_lambda_event_sources_1 = require("aws-cdk-lib/aws-lambda-event-sources");
const aws_sqs_1 = require("aws-cdk-lib/aws-sqs");
const constructs_1 = require("constructs");
class SwnQueue extends constructs_1.Construct {
    constructor(scope, id, props) {
        super(scope, id);
        //queue
        this.orderQueue = new aws_sqs_1.Queue(this, 'OrderQueue', {
            queueName: 'OrderQueue',
            visibilityTimeout: aws_cdk_lib_1.Duration.seconds(30) // default value
        });
        props.consumer.addEventSource(new aws_lambda_event_sources_1.SqsEventSource(this.orderQueue, {
            batchSize: 1
        }));
    }
}
exports.SwnQueue = SwnQueue;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicXVldWUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJxdWV1ZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQSw2Q0FBdUM7QUFFdkMsbUZBQXNFO0FBQ3RFLGlEQUFvRDtBQUNwRCwyQ0FBdUM7QUFNdkMsTUFBYSxRQUFTLFNBQVEsc0JBQVM7SUFJbkMsWUFBWSxLQUFnQixFQUFFLEVBQVUsRUFBRSxLQUFvQjtRQUMxRCxLQUFLLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxDQUFDO1FBRW5CLE9BQU87UUFDUCxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksZUFBSyxDQUFDLElBQUksRUFBRSxZQUFZLEVBQUU7WUFDOUMsU0FBUyxFQUFHLFlBQVk7WUFDeEIsaUJBQWlCLEVBQUUsc0JBQVEsQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLENBQUMsZ0JBQWdCO1NBQ3pELENBQUMsQ0FBQztRQUVILEtBQUssQ0FBQyxRQUFRLENBQUMsY0FBYyxDQUFDLElBQUkseUNBQWMsQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFO1lBQzlELFNBQVMsRUFBRSxDQUFDO1NBQ2YsQ0FBQyxDQUFDLENBQUM7SUFDTixDQUFDO0NBQ0o7QUFqQkQsNEJBaUJDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRHVyYXRpb24gfSBmcm9tIFwiYXdzLWNkay1saWJcIjtcclxuaW1wb3J0IHsgSUZ1bmN0aW9uIH0gZnJvbSBcImF3cy1jZGstbGliL2F3cy1sYW1iZGFcIjtcclxuaW1wb3J0IHsgU3FzRXZlbnRTb3VyY2UgfSBmcm9tIFwiYXdzLWNkay1saWIvYXdzLWxhbWJkYS1ldmVudC1zb3VyY2VzXCI7XHJcbmltcG9ydCB7IElRdWV1ZSwgUXVldWUgfSBmcm9tIFwiYXdzLWNkay1saWIvYXdzLXNxc1wiO1xyXG5pbXBvcnQgeyBDb25zdHJ1Y3QgfSBmcm9tIFwiY29uc3RydWN0c1wiO1xyXG5cclxuaW50ZXJmYWNlIFN3blF1ZXVlUHJvcHMge1xyXG4gICAgY29uc3VtZXI6IElGdW5jdGlvbjtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFN3blF1ZXVlIGV4dGVuZHMgQ29uc3RydWN0IHtcclxuXHJcbiAgICBwdWJsaWMgcmVhZG9ubHkgb3JkZXJRdWV1ZTogSVF1ZXVlO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHNjb3BlOiBDb25zdHJ1Y3QsIGlkOiBzdHJpbmcsIHByb3BzOiBTd25RdWV1ZVByb3BzKSB7XHJcbiAgICAgICAgc3VwZXIoc2NvcGUsIGlkKTtcclxuXHJcbiAgICAgIC8vcXVldWVcclxuICAgICAgdGhpcy5vcmRlclF1ZXVlID0gbmV3IFF1ZXVlKHRoaXMsICdPcmRlclF1ZXVlJywge1xyXG4gICAgICAgIHF1ZXVlTmFtZSA6ICdPcmRlclF1ZXVlJyxcclxuICAgICAgICB2aXNpYmlsaXR5VGltZW91dDogRHVyYXRpb24uc2Vjb25kcygzMCkgLy8gZGVmYXVsdCB2YWx1ZVxyXG4gICAgICB9KTtcclxuICAgICAgXHJcbiAgICAgIHByb3BzLmNvbnN1bWVyLmFkZEV2ZW50U291cmNlKG5ldyBTcXNFdmVudFNvdXJjZSh0aGlzLm9yZGVyUXVldWUsIHtcclxuICAgICAgICAgIGJhdGNoU2l6ZTogMVxyXG4gICAgICB9KSk7XHJcbiAgICB9XHJcbn0iXX0=